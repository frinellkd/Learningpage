{% extends 'base.html' %}
{% block body %}

<h1>Learning Page</h1>

<h2>Topics</h2>

    <a href="/view/1"><button type='button' name='Topic1'>Amelia Earhart</button></a>
    <a href="/view/2"><button type='button' name='Topic2'>Titanic</button></a>
    <a href="/view/3"><button type='button' name='Topic1'>Martin Luther King Jr.</button></a>
    <a href="/view/4"><button type='button' name='Topic1'>JFK Assassination</button></a>
    <a href="/view/5"><button type='button' name='Topic1'>Hindenburg</button></a>
    
    <div id='map-canvas' class='map-canvas' >Map should go here!</div>

    
   
    <script>

    var map;

    function initialize(){

        var mapOptions = {
            zoom: 3,
            center: new google.maps.LatLng(32.4621474,-92.8396034)
        };

        map = new google.maps.Map(
            document.getElementById('map-canvas'),
            mapOptions);
        


        {% for data in topic_data %}

        var infowindow{{data.topic_id}} = new google.maps.InfoWindow({
            content: '<a href="/view/{{data.topic_id}}">{{data.description}}</a>'
            });
        
        
            // attach markers to each topic locaiton retruned in JSON
            var marker{{data.topic_id}} = new google.maps.Marker({
                    map: map,
                    title: '{{ data.topic_title}}', 
                    place: { 
                        location: {lat: {{data.lat}}, lng: {{data.lng}}},
                        query: '{{data.description}}'
                    }    
            });        
            
            marker{{data.topic_id}}.addListener('click', function(){
            infowindow{{data.topic_id}}.open(map, marker{{data.topic_id}});    
            });

        {% endfor %} 
        

    }

    

    google.maps.event.addDomListener(window, 'load', initialize);

    </script>




   
{% endblock %}
